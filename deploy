#!/usr/bin/env bash

pushd /usr/local/var/genenews
git checkout .
git pull git://github.com/christandiono/genenews.git
rm -rf /usr/local/var/genenews/settings_local.py
ln -s /usr/local/var/genenews/settings_local.production /usr/local/var/genenews/settings_local.py
python manage.py syncdb
python manage.py evolve --hint --execute
launchctl unload /Library/LaunchDaemons/it.unbit.projects.uwsgi.plist
launchctl load /Library/LaunchDaemons/it.unbit.projects.uwsgi.plist
chmod 777 /tmp/uwsgi.sock
popd
